<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Zero Log File Parser</title>
	<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no"/>
	<meta name="description" content="Zero Log File Parser">
	<meta name="author" content="Keith Thomas">
	
<style>
body {
	width: 100%;
	margin: auto;
	background-color: #bfdfed;
	font-size: 16px	
}

#intro {
	max-width: 600px;
	margin: auto;
}

#title{
	border: 2px solid #808080;	
	background-color: #e8e8e8;
	height: 38px;
	width: 300px;
	font-size: 30px;
	text-align: center;
	margin:25px auto 25px;
}

#buttons {
	width: 300px;
	margin-left:auto;
	margin-right:auto;
}

#infile {
	padding-top: 15px;
	/*-webkit-appearance: button;*/
	text-align: center;
	font-size: 16px;
	font-family: sans-serif;
	height: 35px;
	width: 118px;
	display: inline-block;
	background-color: #e8e8e8;
	border: 2px solid;
	border-top-color: white;
	border-left-color: white;
}

input[type=file] {
	display: none;
}

#down {
	margin-left: 52px;
	width: 120px;
	height: 52px;
	padding-left: 20px;
	padding-right: 20px;
	font-size: 16px;
	display: inline-block;
	background-color: #e8e8e8;
	border: 2px solid;
	border-top-color: white;
	border-left-color: white;
}

#print {
	background-color: #e8e8e8;
	display: inline-block;
	padding: 2px;
}

#parsed {
	white-space: pre;
	font-family: monospace;
	background-color: #e8e8e8;
	margin: 5px 0;
	max-height: 400px;
	overflow-y: auto;
	overflow-x: auto;
}

#disclaim {
	max-width: 600px;
	margin: auto;
}

#screenshot {        
	display:block;
	margin-left:auto;
	margin-right:auto;
}
</style>
	
</head>

<body>

<div id="intro">	
<p id="title" >Zero Log File Parser</p>
<p>Decoder for Zero motorcycle MBB or BMS log files. Get log files from the Zero App (Support/Email Bike Logs), send to file storage. Choose .bin file to decode text.</p>
</div>
	
<div id="buttons">
<label id="infile">Choose File
<input type="file" id="choose" />
</label>	

<button id="down" >Download</button> <br><br>
</div>		

<div id="fname"></div>	
	
<div id="print"></div><br><br>

<div id="parsed"></div>
	
<div id="disclaim"> DISCLAIMER: This software is not sponsored by, associated with, affiliated with, or endorsed by Zero Motorcycles. It is maintained by riders just like you. Information is presented as-is and may be inaccurate.<br><br>
This decoder works offline. Use Chrome or Firefox.<br><br>
	
<img alt="screen shot" id="screenshot"  src="
data:image/png;base64,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
"/></div>	

<script type="text/javascript">
/* FileSaver.js
 * A saveAs() FileSaver implementation.
 * 1.3.2
 * 2016-06-16 18:25:19
 *
 * By Eli Grey, http://eligrey.com
 * License: MIT
 *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 */

/*global self */
/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

var saveAs = saveAs || (function(view) {
	"use strict";
	// IE <10 is explicitly unsupported
	if (typeof view === "undefined" || typeof navigator !== "undefined" && /MSIE [1-9]\./.test(navigator.userAgent)) {
		return;
	}
	var
		  doc = view.document
		  // only get URL when necessary in case Blob.js hasn't overridden it yet
		, get_URL = function() {
			return view.URL || view.webkitURL || view;
		}
		, save_link = doc.createElementNS("http://www.w3.org/1999/xhtml", "a")
		, can_use_save_link = "download" in save_link
		, click = function(node) {
			var event = new MouseEvent("click");
			node.dispatchEvent(event);
		}
		, is_safari = /constructor/i.test(view.HTMLElement) || view.safari
		, is_chrome_ios =/CriOS\/[\d]+/.test(navigator.userAgent)
		, throw_outside = function(ex) {
			(view.setImmediate || view.setTimeout)(function() {
				throw ex;
			}, 0);
		}
		, force_saveable_type = "application/octet-stream"
		// the Blob API is fundamentally broken as there is no "downloadfinished" event to subscribe to
		, arbitrary_revoke_timeout = 1000 * 40 // in ms
		, revoke = function(file) {
			var revoker = function() {
				if (typeof file === "string") { // file is an object URL
					get_URL().revokeObjectURL(file);
				} else { // file is a File
					file.remove();
				}
			};
			setTimeout(revoker, arbitrary_revoke_timeout);
		}
		, dispatch = function(filesaver, event_types, event) {
			event_types = [].concat(event_types);
			var i = event_types.length;
			while (i--) {
				var listener = filesaver["on" + event_types[i]];
				if (typeof listener === "function") {
					try {
						listener.call(filesaver, event || filesaver);
					} catch (ex) {
						throw_outside(ex);
					}
				}
			}
		}
		, auto_bom = function(blob) {
			// prepend BOM for UTF-8 XML and text/* types (including HTML)
			// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF
			if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
				return new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});
			}
			return blob;
		}
		, FileSaver = function(blob, name, no_auto_bom) {
			if (!no_auto_bom) {
				blob = auto_bom(blob);
			}
			// First try a.download, then web filesystem, then object URLs
			var
				  filesaver = this
				, type = blob.type
				, force = type === force_saveable_type
				, object_url
				, dispatch_all = function() {
					dispatch(filesaver, "writestart progress write writeend".split(" "));
				}
				// on any filesys errors revert to saving with object URLs
				, fs_error = function() {
					if ((is_chrome_ios || (force && is_safari)) && view.FileReader) {
						// Safari doesn't allow downloading of blob urls
						var reader = new FileReader();
						reader.onloadend = function() {
							var url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');
							var popup = view.open(url, '_blank');
							if(!popup) view.location.href = url;
							url=undefined; // release reference before dispatching
							filesaver.readyState = filesaver.DONE;
							dispatch_all();
						};
						reader.readAsDataURL(blob);
						filesaver.readyState = filesaver.INIT;
						return;
					}
					// don't create more object URLs than needed
					if (!object_url) {
						object_url = get_URL().createObjectURL(blob);
					}
					if (force) {
						view.location.href = object_url;
					} else {
						var opened = view.open(object_url, "_blank");
						if (!opened) {
							// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html
							view.location.href = object_url;
						}
					}
					filesaver.readyState = filesaver.DONE;
					dispatch_all();
					revoke(object_url);
				}
			;
			filesaver.readyState = filesaver.INIT;

			if (can_use_save_link) {
				object_url = get_URL().createObjectURL(blob);
				setTimeout(function() {
					save_link.href = object_url;
					save_link.download = name;
					click(save_link);
					dispatch_all();
					revoke(object_url);
					filesaver.readyState = filesaver.DONE;
				});
				return;
			}

			fs_error();
		}
		, FS_proto = FileSaver.prototype
		, saveAs = function(blob, name, no_auto_bom) {
			return new FileSaver(blob, name || blob.name || "download", no_auto_bom);
		}
	;
	// IE 10+ (native saveAs)
	if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) {
		return function(blob, name, no_auto_bom) {
			name = name || blob.name || "download";

			if (!no_auto_bom) {
				blob = auto_bom(blob);
			}
			return navigator.msSaveOrOpenBlob(blob, name);
		};
	}

	FS_proto.abort = function(){};
	FS_proto.readyState = FS_proto.INIT = 0;
	FS_proto.WRITING = 1;
	FS_proto.DONE = 2;

	FS_proto.error =
	FS_proto.onwritestart =
	FS_proto.onprogress =
	FS_proto.onwrite =
	FS_proto.onabort =
	FS_proto.onerror =
	FS_proto.onwriteend =
		null;

	return saveAs;
}(
	   typeof self !== "undefined" && self
	|| typeof window !== "undefined" && window
	|| this.content
));
// `self` is undefined in Firefox for Android content script context
// while `this` is nsIContentFrameMessageManager
// with an attribute `content` that corresponds to the window

if (typeof module !== "undefined" && module.exports) {
  module.exports.saveAs = saveAs;
} else if ((typeof define !== "undefined" && define !== null) && (define.amd !== null)) {
  define("FileSaver.js", function() {
    return saveAs;
  });
}
</script>
	
<script  type="text/javascript">
/*
zero-parse.js
Decoder for Zero motorcycle MBB or BMS log files.
1.0 
02/22/2017

Copyright 2017 Keith Thomas

License: MIT https://github.com/keithxemi/browser-parse/blob/master/LICENSE


*/

/* jslint browser: true  */
/*global saveAs, Blob, FileReader, DataView, Uint8Array, Uint16Array, Uint32Array */

(function () {
	'use strict';
	
	var logFileName,
		parsedText;
	
	function dec(buf, type, offset, count) {
		var dv = new DataView(buf);

		switch (type) {
		case 'txt':
			return String.fromCharCode.apply(null, new Uint8Array(buf, offset, count)).replace(/[^ -~]+/g, '');
			//return decoder.decode(new Uint8Array(buf, offset, count)).replace(/[^ -~]+/g, "");, TextDecoder decoder = new TextDecoder('utf-8'),
		case 'i16':
			return dv.getInt16(offset, true);
		case 'u16':
			return dv.getUint16(offset, true);
		case 'i32':
			return dv.getInt32(offset, true);
		case 'u32':
			return dv.getUint32(offset, true);
		default:
			return 'bullshit';
		}
	}

	function unescapeBlock(data) {
		var d = new Uint8Array(data),
			startOffset = 0,
			escapeOffset = d.indexOf(0xfe),
			d1,
			d2;

		while (escapeOffset !== -1) {
			escapeOffset += startOffset;
			d[escapeOffset] = d[escapeOffset] ^ d[escapeOffset + 1] - 1;
			d1 = d.slice(0, escapeOffset + 1);
			d2 = d.slice(escapeOffset + 2);
			d = new Uint8Array(d1.length + d2.length);
			d.set(d1);
			d.set(d2, d1.length);
			startOffset = escapeOffset + 1;
			escapeOffset = new Uint8Array(d.slice(startOffset)).indexOf(0xfe);
		}
		return d;
	}

	function formatDate(date) {
		var year = date.getFullYear(),
			month = (1 + date.getMonth()).toString(),
			day = date.getDate().toString(),
			hours = date.getHours().toString(),
			minutes = date.getMinutes().toString(),
			seconds = date.getSeconds().toString();

		month = month.length > 1 ? month : '0' + month;
		day = day.length > 1 ? day : '0' + day;
		hours = hours.length > 1 ? hours : '0' + hours;
		minutes = minutes.length > 1 ? minutes : '0' + minutes;
		seconds = seconds.length > 1 ? seconds : '0' + seconds;
		return '     ' + month + '/' + day + '/' + year + ' ' +
			hours + ':' + minutes + ':' + seconds;
	}  // local time

	function byteToHex(b) {
		var hexChar = ['0', '1', '2', '3', '4', '5', '6', '7', '8',
					   '9', 'a', 'b', 'c', 'd', 'e', 'f'];
		return '0x' + hexChar[(b >> 4) & 0x0f] + hexChar[b & 0x0f];
	}

	function countIt(buf, it) {
		var bv = new Uint8Array(buf),
			cnt = 0,
			i;

		for (i = 0; i < bv.byteLength; i++) {
			if (bv[i] === it) {
				cnt++;
			}
		}
		return cnt;
	}
	
	function parseEntry(logData, address) {
		var header,
			headerBad,
			entry = {},
			unescapedBlock,
			messageType,
			ts,
			timestamp,
			asDate,
			ms,
			x = [],
			i = 0,
			m = '',
			f = {};
		
		header = logData[address];
		headerBad = header !== 0xb2;
		while (headerBad) {
			address += 1;
			header = logData[address];
			headerBad = header !== 0xb2;
		}
		entry.length = logData[address + 1];
		unescapedBlock = unescapeBlock(logData.slice(address +
													 2, address + 3 + entry.length));
		ms = unescapedBlock.slice(0, 2);
		messageType = new Uint8Array(ms.buffer)[0];
		ts = unescapedBlock.slice(1, 5);
		timestamp = new Uint32Array(ts.buffer)[0];
		x = new Uint8Array(unescapedBlock.length - 5);
		x.set(unescapedBlock.slice(5));
		
		entry.event = '';
		entry.conditions = '';
		entry.unknown = '';

		if (timestamp > 0xfff) {
			asDate = new Date(timestamp * 1000);
			entry.time = formatDate(asDate);
		} else {
			entry.time = ('                        ' + timestamp).slice(-24);
		}
		
// Unknown entry types to be added when defined: type, length, source, example		
		switch (messageType) {
		case 0x01: // board_status
			entry.event = 'BMS Reset';
			if (x[0] === 4) {
				entry.conditions = 'Software';
			} else {
				entry.conditions = 'Unknown';
			}
			return entry;
		//case 0x02: unknown, 2, 6350_MBB_2016-04-12, 0x02 0x2e 0x11 ???
		case 0x03: // bms_discharge_level
			switch (x[0xf]) {
			case 1:
				m = 'Bike On';
				break;
			case 2:
				m = 'Charge';
				break;
			case 3:
				m = 'Idle';
				break;
			default:
				m = 'Unknown';
				break;
			}
			f.AH = ('000' + Math.floor((dec(x.buffer, 'u32', 6) / 1000000))).slice(-3);
			f.B = ('000' + (dec(x.buffer, 'u16', 2) - dec(x.buffer, 'u16', 0))).slice(-3);
			f.I = ('000' + Math.floor(dec(x.buffer, 'i32', 0x10) / 1000000)).slice(-3);
			f.L = dec(x.buffer, 'u16', 0);
			f.H = dec(x.buffer, 'u16', 2);
			f.PT = ('000' + x[4]).slice(-3);
			f.BT = ('000' + x[5]).slice(-3);
			f.SOC = ('   ' + x[0xa]).slice(-3);
			f.PV = dec(x.buffer, 'u32', 0xb);
			f.l = dec(x.buffer, 'u16', 0x14);
			f.M = m;
			f.X = dec(x.buffer, 'u16', 0x16); // not included in log, contactor voltage?
			entry.event = 'Discharge level';
			entry.conditions =
				f.AH + ' AH,' +
				' SOC:' + f.SOC + '%,' +
				' I:' + f.I + 'A,' +
				' L:' + f.L + ',' +
				' l:' + f.l + ',' +
				' H:' + f.H + ',' +
				' B:' + f.B + ',' +
				' PT:' + f.PT + 'C,' +
				' BT:' + f.BT + 'C,' +
				' PV:' + f.PV + ',' +
				' M:' + m;
			return entry;
		case 0x04: // bms_charge_full
			f.AH = ('000' + Math.floor((dec(x.buffer, 'u32', 6) / 1000000))).slice(-3);
			f.B = ('000' + (dec(x.buffer, 'u16', 2) - dec(x.buffer, 'u16', 0))).slice(-3);
			f.L = dec(x.buffer, 'u16', 0);
			f.H = dec(x.buffer, 'u16', 2);
			f.PT = ('000' + x[4]).slice(-3);
			f.BT = ('000' + x[5]).slice(-3);
			f.SOC = ('   ' + x[0xa]).slice(-3);
			f.PV = dec(x.buffer, 'u32', 0xb);
			entry.event = 'Charged To Full';
			entry.conditions =
				f.AH + ' AH,' +
				' SOC:' + f.SOC + '%,' +
				'         L:' + f.L + ',' +
				'         H:' + f.H + ',' +
				' B:' + f.B + ',' +
				' PT:' + f.PT + 'C,' +
				' BT:' + f.BT + 'C,' +
				' PV:' + f.PV;
			return entry;
		// case 0x05: unknown, 17, 6890_BMS0_2016-07-03, 0x05 0x34 0x0b 0xe0 0x0c 0x35 0x2a 0x89 0x71 0xb5 0x01 0x00 0xa5 0x62 0x01 0x00 0x20 0x90 ???
		case 0x06: // bms_discharge_low
			f.AH = ('000' + Math.floor((dec(x.buffer, 'u32', 6) / 1000000))).slice(-3);
			f.B = ('000' + (dec(x.buffer, 'u16', 2) - dec(x.buffer, 'u16', 0))).slice(-3);
			f.L = dec(x.buffer, 'u16', 0);
			f.H = dec(x.buffer, 'u16', 2);
			f.PT = ('000' + x[4]).slice(-3);
			f.BT = ('000' + x[5]).slice(-3);
			f.SOC = ('   ' + x[0xa]).slice(-3);
			f.PV = dec(x.buffer, 'u32', 0xb);
			entry.event = 'Discharged To Low';
			entry.conditions =
				f.AH + ' AH,' +
				' SOC:' + f.SOC + '%,' +
				'         L:' + f.L + ',' +
				'         H:' + f.H + ',' +
				' B:' + f.B + ',' +
				' PT:' + f.PT + 'C,' +
				' BT:' + f.BT + 'C,' +
				' PV:' + f.PV;
			return entry;
		case 0x08: // bms_system_state
			if (x[0] === 0) {
				entry.event = 'System Turned Off';
			} else {
				entry.event = 'System Turned On';
			}
			return entry;
		case 0x09: // key_state
			if (x[0] === 0) {
				entry.event = 'Key Off';
			} else {
				entry.event = 'Key On';
			}
			return entry;
		case 0x0b: // bms_soc_adj_voltage
			f.old = dec(x.buffer, 'u32', 0);
			f.oldSoc = x[4];
			f.anew = dec(x.buffer, 'u32', 5);
			f.newSoc = x[9];
			f.low = dec(x.buffer, 'u16', 0x0a);
			entry.event = 'SOC adjusted for voltage';
			entry.conditions = 'old:   ' + f.old + 'uAH (soc:' + f.oldSoc +
				'%), new:   ' + f.anew + 'uAH (soc:' + f.newSoc +
				'%), low cell: ' + f.low + ' mV';
			return entry;
		case 0x0d: // bms_curr_sens_zero
			f.old = dec(x.buffer, 'u16', 0);
			f.anew = dec(x.buffer, 'u16', 2);
			f.cf = x[4];
			entry.event = 'Current Sensor Zeroed';
			entry.conditions = 'old: ' + f.old + 'mV, ' +
                           'new: ' + f.anew + 'mV, ' +
                           'corrfact: ' + f.cf;
			return entry;
		//case 0x0e: unknown, 3, 6350_BMS0_2017-01-30 0x0e 0x05 0x00 0xff ???
		case 0x10: // bms_state
			if (x[0] === 0) {
				entry.event = 'Exiting Hibernate';
			} else {
				entry.event = 'Entering Hibernate';
			}
			return entry;
		case 0x11: // bms_isolation_fault
			f.ohms = dec(x.buffer, 'u32', 0);
			f.cell = x[4];
			entry.event = 'Chassis Isolation Fault';
			entry.conditions = f.ohms + ' ohms to cell ' + f.cell;
			return entry;
		case 0x12: // bms_reflash
			f.rev = x[0];
			f.build = dec(x.buffer, 'txt', 1, 20);
			entry.event = 'BMS Reflash';
			entry.conditions = 'Revision ' + f.rev + ' Built ' + f.build;
			return entry;
		case 0x13: // bms_change_can_id
			f.old = ('0' + x[0]).slice(-2);
			f.anew = ('0' + x[1]).slice(-2);
			entry.event = 'Changed CAN Node ID';
			entry.conditions = 'old: ' + f.old + ', new: ' + f.anew;
			return entry;
		case 0x15: // bms_contactor_state
			f.pv = dec(x.buffer, 'u32', 1);
			f.sv = dec(x.buffer, 'u32', 5);
			f.dc = dec(x.buffer, 'u32', 9);
			f.prechg = 0;
			if (dec(x.buffer, 'u32', 1)) {
				f.prechg = (dec(x.buffer, 'u32', 5) /
							dec(x.buffer, 'u32', 1) * 100).toFixed(0);
			}
			m = 'Contactor was Opened';
			if (x[0]) {
				m = 'Contactor was Closed';
			}
			entry.event = m;
			entry.conditions = 'Pack V: ' + f.pv + 'mV, Switched V: ' + f.sv +
				'mV, Prechg Pct: ' + f.prechg + '%, Dischg Cur: ' + f.dc + 'mA';
			return entry;
		case 0x16: // bms_discharge_cut
			f.cut = (x[0] / 255 * 100).toFixed(0);
			entry.event = 'Discharge cutback';
			entry.conditions = f.cut + '%';
			return entry;
		case 0x18: // bms_contactor_drive
			f.pv = dec(x.buffer, 'u32', 1);
			f.sv = dec(x.buffer, 'u32', 5);
			f.dc = x[9];
			entry.event = 'Contactor drive turned on';
			entry.conditions = 'Pack V: ' + f.pv + 'mV, Switched V: ' + f.sv + 'mV, Duty Cycle: ' + f.dc + '%';
			return entry;
		//case 0x1c: unknown, 8, 3455_MBB_2016-09-11, 0x1c 0xdf 0x56 0x01 0x00 0x00 0x00 0x30 0x02 ???
		//case 0x1e: unknown, 4, 6472_MBB_2016-12-12, 0x1e 0x32 0x00 0x06 0x23 ???
		//case 0x1f: unknown, 4, 5078_MBB_2017-01-20, 0x1f 0x00 0x00 0x08 0x43 ???
		//case 0x20: unknown, 3, 6472_MBB_2016-12-12, 0x20 0x02 0x32 0x00 ???
		//case 0x26: unknown, 6, 3455_MBB_2016-09-11, 0x26 0x72 0x00 0x40 0x00 0x80 0x00 ???
		case 0x28: // battery_can_link_up
			m = x[0];
			entry.event = 'Module 0' + m + ' CAN Link Up';
			return entry;
		case 0x29: // battery_can_link_down
			m = x[0];
			entry.event = 'Module 0' + m + ' CAN Link Down';
			return entry;
		case 0x2a: // sevcon_can_link_up
			entry.event = 'Sevcon CAN Link Up';
			return entry;
		case 0x2b: // sevcon_can_link_down
			entry.event = 'Sevcon CAN Link Down';
			return entry;
		case 0x2c: // run_status
			switch (x[0x12]) {
			case 0:
				m = '00';
				break;
			case 1:
				m = '01';
				break;
			case 2:
				m = '10';
				break;
			case 3:
				m = '11';
				break;
			default:
				m = 'Unknown';
				break;
			}
			f.ptHigh = x[0];
			f.ptLow = x[1];
			f.soc = ('   ' + dec(x.buffer, 'u16', 2)).slice(-3);
			f.pv = ('       ' + dec(x.buffer, 'u32', 4) / 1000).slice(-7);
			f.mt = ('    ' + dec(x.buffer, 'i16', 8)).slice(-4);
			f.ct = ('    ' + dec(x.buffer, 'u16', 0xa)).slice(-4);
			f.rpm = ('    ' + dec(x.buffer, 'u16', 0xc)).slice(-4);
			f.bc = ('    ' + dec(x.buffer, 'i16', 0x10)).slice(-4);
			f.mc = ('    ' + dec(x.buffer, 'i16', 0x13)).slice(-4);
			f.at = ('    ' + dec(x.buffer, 'u16', 0x15)).slice(-4);
			f.odo = ('     ' + dec(x.buffer, 'u32', 0x17)).slice(-5);
			entry.event = 'Riding';
			entry.conditions = 'PackTemp: h ' + f.ptHigh + 'C, l ' + f.ptLow +
				'C, ' + 'PackSOC:' + f.soc + '%, ' + 'Vpack:' + f.pv + 'V, ' +
				'MotAmps:' + f.mc + ', BattAmps:' + f.bc + ', Mods: ' + m +
				', MotTemp:' + f.mt + 'C, CtrlTemp:' + f.ct + 'C, AmbTemp:' +
				f.at + 'C, MotRPM:' + f.rpm + ', Odo:' + f.odo + 'km';
			return entry;
		case 0x2d: // charging_status
			switch (x[0xc]) {
			case 0:
				m = '00';
				break;
			case 1:
				m = '01';
				break;
			case 2:
				m = '10';
				break;
			case 3:
				m = '11';
				break;
			default:
				m = 'Unknown';
				break;
			}
			f.ptHigh = x[0];
			f.ptLow = x[1];
			f.soc = ('   ' + dec(x.buffer, 'u16', 2)).slice(-3);
			f.pv = ('       ' + dec(x.buffer, 'u32', 4) / 1000).slice(-7);
			f.bc = ('    ' + dec(x.buffer, 'i16', 8)).slice(-4);
			f.at = ('    ' + dec(x.buffer, 'u16', 0xd)).slice(-3);
			entry.event = 'Charging';
			entry.conditions = 'PackTemp: h ' + f.ptHigh + 'C, l ' + f.ptLow +
				'C, AmbTemp:' + f.at + 'C, PackSOC:' + f.soc + '%, ' +
				'Vpack:' + f.pv + 'V, ' + 'BattAmps:' + f.bc +
				', Mods: ' + m +
				', MbbChgEn: Yes, BmsChgEn: No';
			return entry;
		case 0x2f: // sevcon_status
			switch (dec(x.buffer, 'u16', 2)) {
			case 0x4681:
				m = 'Preop';
				break;
			case 0x4884:
				m = 'Sequence Fault';
				break;
			case 0x4981:
				m = 'Throttle Fault';
				break;
			default:
				m = 'Unknown';
				break;
			}
			f.code = ('    ' + dec(x.buffer, 'i16', 0).toString(16)).slice(-4);
			f.reg = ('00' + x[4].toString(16)).slice(-2);
			f.sevCode = ('0000' + dec(x.buffer, 'i16', 2).toString(16)).slice(-4);
			f.data = '';
			for (i = 0; i < x.length - 8; i++) {
				f.data += byteToHex(x[5 + i]) + ' ';
			}
			entry.event = 'SEVCON CAN EMCY Frame';
			entry.conditions = 'Error Code: 0x' + f.code +
				', Error Reg: 0x' + f.reg + ' Sevcon Error Code: 0x' + f.sevCode +
				', Data: ' + f.data + ', ' + m;
			return entry;
		case 0x30: // charger_status
			m = ' Disconnected';
			if (x[1]) {
				m = ' Connected';
			}
			f.module = x[0];
			switch (x[0]) {
			case 0:
				f.name = 'Calex 720W';
				break;
			case 1:
				f.name = 'Calex 1200W';
				break;
			case 2:
				f.name = 'External Chg 0';
				break;
			case 3:
				f.name = 'External Chg 1';
				break;
			default:
				f.name = 'Unknown';
				break;
			}
			entry.event = f.name + ' Charger ' + f.module + m;
			return entry;
		//case 0x31: unknown, 1, 6350_MBB_2016-04-12, 0x31 0x00 ???
		case 0x33: // battery_status
			
			f.mod = ('0' + x[1]).slice(-2);
			f.mv = dec(x.buffer, 'u32', 2) / 1000;
			f.max = dec(x.buffer, 'u32', 6) / 1000;
			f.min = dec(x.buffer, 'u32', 0xa) / 1000;
			f.vc = dec(x.buffer, 'u32', 0xe) / 1000;
			f.bc = dec(x.buffer, 'u16', 0x12);
				

			f.diff = (f.max - f.min).toFixed(3);
			f.prechg = 0;
			if (f.mv) {
				f.prechg = f.vc * 100 / f.mv;
			}
			entry.event = 'Module ' + f.mod + m;
			switch (x[0]) {
			case 0:
				m = 'Opening Contactor';
				entry.conditions = 'vmod: ' + f.mv +
					'V, batt curr: ' + f.bc + 'A';
				break;
			case 1:
				m = 'Closing Contactor';
				entry.conditions = 'vmod: ' + f.mv +
					' maxsys: ' + f.max +
					' minsys: ' + f.min +
					' diff: ' + f.diff +
					' vcap: ' + f.vc +
					' prechg: ' + Math.floor(f.prechg) + '%';
				break;
			case 2:
				m = 'Registered';
				f.ser = dec(x.buffer, 'txt', 0x14, 8);
				entry.conditions = 'serial: ' + f.ser +
					',  vmod: ' + f.mv + 'V';
				break;
			default:
				m = 'Unknown';
				break;
			}
			return entry;
		case 0x34: // power_state
			if (x[0] === 0) {
				entry.event = 'Power Off';
			} else {
				entry.event = 'Power On';
			}
			switch (x[1]) {
			case 1:
				m = 'Key Switch';
				break;
			case 3:
				m = 'Ext Charger 1';
				break;
			case 4:
				m = 'Onboard Charger';
				break;
			default:
				m = 'Unknown';
			}
			entry.conditions = m;
			return entry;
		//case 0x35: unknown, 5, 6472_MBB_2016-12-12, 0x35 0x00 0x46 0x01 0xcb 0xff ???
		case 0x36: // sevcon_power_state
			if (x[0] === 0) {
				entry.event = 'Sevcon Turned Off';
			} else {
				entry.event = 'Sevcon Turned On';
			}
			return entry;
		//case 0x37: unknown, 0, 3558_MBB_2016-12-25, 0x37  ???
		case 0x38: // show_bluetooth_state
			entry.event = 'BT RX buffer reset';
			return entry;
		case 0x39: // battery_discharge_current_limited
			f.limit = dec(x.buffer, 'u16', 0);
			f.minCell = dec(x.buffer, 'u16', 2);
			f.temp = x[4];
			f.max = dec(x.buffer, 'u16', 5);
			f.percent = Math.floor(f.limit * 100 / f.max);
			entry.event = 'Batt Dischg Cur Limited';
			entry.conditions = f.limit + ' A (' + f.percent + '%), ' +
				'MinCell: ' + f.minCell + 'mV, MaxPackTemp: ' + f.temp + 'C';
			return entry;
		case 0x3a: // low_chassis_isolation
			f.kohms = dec(x.buffer, 'u32', 0);
			f.cell = x[4];
			entry.event = 'Low Chassis Isolation';
			entry.conditions = f.kohms + ' KOhms to cell ' + f.cell;
			return entry;
		case 0x3b: // precharge_decay_too_steep
			entry.event = 'Precharge Decay Too Steep. Restarting Sevcon.';
			return entry;
		case 0x3c: // disarmed_status
			switch (x[0x12]) {
			case 0:
				m = '00';
				break;
			case 1:
				m = '01';
				break;
			case 2:
				m = '10';
				break;
			case 3:
				m = '11';
				break;
			default:
				m = 'Unknown';
				break;
			}
			f.ptHigh = x[0];
			f.ptLow = x[1];
			f.soc = ('   ' + dec(x.buffer, 'u16', 2)).slice(-3);
			f.pv = ('       ' + dec(x.buffer, 'u32', 4) / 1000).slice(-7);
			f.mt = ('    ' + dec(x.buffer, 'i16', 8)).slice(-4);
			f.ct = ('    ' + dec(x.buffer, 'u16', 0xa)).slice(-4);
			f.rpm = ('    ' + dec(x.buffer, 'u16', 0xc)).slice(-4);
			f.bc = ('    ' + dec(x.buffer, 'i16', 0x10)).slice(-4);
			f.mc = ('    ' + dec(x.buffer, 'i16', 0x13)).slice(-4);
			f.at = ('    ' + dec(x.buffer, 'u16', 0x15)).slice(-4);
			f.odo = ('     ' + dec(x.buffer, 'u32', 0x17)).slice(-5);
			entry.event = 'Disarmed';
			entry.conditions = 'PackTemp: h ' + f.ptHigh + 'C, l ' + f.ptLow +
				'C, ' + 'PackSOC:' + f.soc + '%, ' + 'Vpack:' + f.pv + 'V, ' +
				'MotAmps:' + f.mc + ', BattAmps:' + f.bc + ', Mods: ' + m +
				', MotTemp:' + f.mt + 'C, CtrlTemp:' + f.ct + 'C, AmbTemp:' +
				f.at + 'C, MotRPM:' + f.rpm + ', Odo:' + f.odo + 'km';
			return entry;
		case 0x3d: // battery_contactor_closed
			m = x[0];
			entry.event = 'Battery module ' + m + ' contactor closed';
			return entry;
		case 0xfd: // debug_message
			m = '';
			for (i = 0; i < x.length - 4; i++) {
				m += String.fromCharCode(x[i]);
			}
			entry.event = m;
			return entry;
		default: // unknown type
			entry.unknown = messageType;
			entry.event = byteToHex(messageType) + ' ';
			for (i = 0; i < x.length; i++) {
				entry.event += byteToHex(x[i]) + ' ';
			}
			entry.event += '???';
			return entry;
		}
	}

	function parseLog(bin) {
		var logType = dec(bin, 'txt', 0, 3),
			ba = new Uint8Array(bin),
			count = countIt(bin, 0xa2),
			hdr = ba.indexOf(0xa2),
			dv = new DataView(bin),
			u32 = dec(bin, 'u32', hdr),
			entriesStart = ba.indexOf(0xb2),
			entriesEnd = ba.byteLength,
			claimedEntriesCount = 0,
			entriesDataBegin = 0,
			entriesCount = 0,
			eventLog = [],
			eventLogFirst = [],
			eventLogSecond = [],
			readPos = 0,
			unhandled = 0,
			unknownEntries = 0,
			unknown = [],
			notParsed = '',
			entryNum = 1,
			entry = {},
			element;
		
		if (bin.byteLength > 0x100000 || bin.byteLength < 0x20000) {
			parsedText = 'File size out of range.';
			return parsedText;
		}
		
		parsedText = '';

		if ((logType !== 'MBB') && (logType !== 'BMS')) {
			logType = 'Unknown Type';
		}
		parsedText = 'Zero ' + logType + ' log\n\n';
		if (logType === 'MBB') {
			parsedText += 'Serial number      ' + dec(bin, 'txt', 0x200, 21) + '\n' +
				'VIN                ' + dec(bin, 'txt', 0x240, 17) + '\n' +
				'Firmware rev.      ' + dec(bin, 'u16', 0x27b, 1) + '\n' +
				'Board rev.         ' + dec(bin, 'u16', 0x27d, 1) + '\n' +
				'Model              ' + dec(bin, 'txt', 0x27f, 3) + '\n\n';
		}
		if (logType === 'BMS') {
			parsedText += 'Initial date       ' + dec(bin, 'txt', 0x12, 20) + '\n' +
				'BMS serial number  ' + dec(bin, 'txt', 0x300, 21) + '\n' +
				'Pack serial number ' + dec(bin, 'txt', 0x320, 8) + '\n\n';
		}
		if (logType === 'Unknown Type') {
			parsedText += 'System info unknown' + '\n';
		}

		do {
			if (u32 === 0xa2a2a2a2) {
				entriesEnd = dec(bin, 'u32', hdr + 4);
				entriesStart = dec(bin, 'u32', hdr + 8);
				claimedEntriesCount = dec(bin, 'u32', hdr + 12);
				entriesDataBegin = hdr + 16;
				break;
			}
			count--;
			ba = new Uint8Array(bin, hdr + 1);
			hdr += ba.indexOf(0xa2) + 1;
			u32 = dec(bin, 'u32', hdr);
		} while (count > 0);

		if (entriesStart >= entriesEnd) {
			eventLogFirst = new Uint8Array(bin, entriesStart);
			eventLogSecond =
				new Uint8Array(bin, entriesDataBegin, entriesEnd - entriesDataBegin);
			eventLog = new Uint8Array(eventLogFirst.length + eventLogSecond.length);
			eventLog.set(eventLogFirst);
			eventLog.set(eventLogSecond, eventLogFirst.length);
		} else {
			eventLog = new Uint8Array(bin, entriesStart, entriesEnd - entriesStart);
		} // Handle data wrapping across the upper bound of the ring buffer

		entriesCount = countIt(eventLog, 0xb2);
		parsedText += 'Printing ' + entriesCount  + ' of ' + entriesCount + ' log entries..\n\n';
		parsedText += ' Entry    Time of Log (local)      Event                      Conditions\n';
		parsedText += '+--------+----------------------+--------------------------+----------------------------------\n';

		for (entryNum; entryNum <= entriesCount; entryNum++) {
			entry = parseEntry(eventLog, readPos);
			if (entry.conditions) {
				parsedText += ' ' + ('0000' + entryNum).slice(-5) +
					entry.time + '   ' +
					(entry.event + '                         ').slice(0, 25) +
					'  ' + entry.conditions + '\n';
			} else {
				parsedText += ' ' + ('0000' + entryNum).slice(-5) + entry.time + '   ' + entry.event + '    ' + entry.conditions + '\n';
			}
			if (entry.unknown) {
				unknownEntries += 1;
				if (!unknown.includes(' ' + byteToHex(entry.unknown))) {
					unknown.push(' ' + byteToHex(entry.unknown));
				}
			}
			readPos += entry.length;
			
		}
		if (unknownEntries) {
			notParsed = unknownEntries + ' unknown entries of types' + unknown;
		}
		document.getElementById('print').innerHTML =
			' ' + entriesCount + ' entries found, ' + claimedEntriesCount +
			' claimed. ' + notParsed;
		
		return parsedText;
	}
	
	function readFile() {
		var files = document.getElementById('choose').files,
			reader = new FileReader();

		document.getElementById('print').innerHTML = '';
		document.getElementById('parsed').innerHTML = '';
		document.getElementById('fname').innerHTML = '';
		document.getElementById('print').innerHTML = 'Parsing...';
		if (!files.length) {
			document.getElementById('print').innerHTML = 'Could not parse';
			return;
		}
		if (files[0].name.slice(-4) !== '.bin') {
			document.getElementById('print').innerHTML = 'Could not parse';
			return;
		}
		reader.onloadend = function (evt) {
			if (evt.target.readyState === FileReader.DONE) {
				logFileName = files[0].name.replace('.bin', '.txt');
				document.getElementById('fname').innerHTML = files[0].name;
				document.getElementById('print').innerHTML = 'Could not parse';
				document.getElementById('parsed').innerHTML =
					parseLog(evt.target.result);
			} else {
				document.getElementById('parsed').innerHTML = ' File error';
			}
		};
		reader.readAsArrayBuffer(files[0]);
	}
	
	function saveLog() {
		var blob = new Blob([parsedText], {type: "text/plain;charset=utf-8"});
		
		if (parsedText === undefined) {
			return;
		}
		saveAs(blob, logFileName);
	}

	document.getElementById('choose').addEventListener('change', readFile);
	document.getElementById('down').addEventListener('click', saveLog);
}());
</script>

</body>
</html>
